import{r as i,j as e,L}from"./app-JcAsAuql.js";import{A as T,a as O}from"./app-layout-E1jTg9LY.js";import{a as h}from"./ApiAdmin-CigcBv4Z.js";import{R as k}from"./refresh-cw-BJG4YFjv.js";import{P as q,S as z}from"./search-DCW9xceT.js";import{A as y}from"./activity-BPAZzZpE.js";import{S as U}from"./square-pen-DJd9gEqa.js";import{T as B}from"./trash-2-yi-JkhIH.js";import"./button-f96-MP48.js";import"./index-CfwClSTy.js";import"./index-jL6B-qfF.js";import"./index-BwiEApH7.js";import"./index-Bm2cAylQ.js";import"./app-logo-icon-DBA5PkxD.js";import"./sweetalert2.esm.all-acGi8jXx.js";const b={name:"",description:"",price:"",duration_minutes:"30",category:"preventive",is_active:!0},j=[{value:"preventive",label:"Preventive Care"},{value:"restorative",label:"Restorative"},{value:"cosmetic",label:"Cosmetic"},{value:"surgical",label:"Surgical"},{value:"emergency",label:"Emergency"}],G=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Services",href:"/admin/services"}];function ie(){const[N,_]=i.useState([]),[A,w]=i.useState(!0),[E,x]=i.useState(!1),[f,m]=i.useState(!1),[S,u]=i.useState(null),[r,a]=i.useState(b),[s,n]=i.useState({}),[d,C]=i.useState({search:"",category:"",is_active:""}),[p,D]=i.useState({total:0,active:0,inactive:0}),g=async()=>{try{w(!0);const t=await h.getServices(d);_(t.data||t.services||[]),D(t.summary||p)}catch(t){console.error("Error fetching services:",t)}finally{w(!1)}};i.useEffect(()=>{g()},[d]);const F=async t=>{var l,c;t.preventDefault(),n({});try{const o={...r,price:parseFloat(r.price),duration_minutes:parseInt(r.duration_minutes)};f&&S?await h.updateService(S.id,o):await h.createService(o),x(!1),a(b),u(null),m(!1),g()}catch(o){(c=(l=o.response)==null?void 0:l.data)!=null&&c.errors&&n(o.response.data.errors)}},M=async t=>{try{await h.deleteService(t.id,t.name),g()}catch(l){console.error("Error deleting service:",l)}},P=t=>{u(t),a({name:t.name,description:t.description||"",price:t.price.toString(),duration_minutes:t.duration_minutes.toString(),category:t.category,is_active:t.is_active}),m(!0),x(!0),n({})},$=()=>{u(null),a(b),m(!1),x(!0),n({})},v=(t,l)=>{C(c=>({...c,[t]:l}))},I=()=>{C({search:"",category:"",is_active:""})},R=t=>({preventive:"bg-green-100 text-green-800",restorative:"bg-blue-100 text-blue-800",cosmetic:"bg-purple-100 text-purple-800",surgical:"bg-red-100 text-red-800",emergency:"bg-orange-100 text-orange-800"})[t]||"bg-gray-100 text-gray-800";return e.jsxs(T,{breadcrumbs:G,children:[e.jsx(L,{title:"Services Management"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Services Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage dental services, pricing, and categories"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(k,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs("button",{onClick:$,className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:[e.jsx(q,{className:"w-4 h-4"}),"Add Service"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Services"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.total})]}),e.jsx(y,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Services"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:p.active})]}),e.jsx(y,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Inactive Services"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:p.inactive})]}),e.jsx(y,{className:"w-8 h-8 text-red-600"})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search services...",value:d.search,onChange:t=>v("search",t.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("select",{value:d.category,onChange:t=>v("category",t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),j.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),e.jsxs("select",{value:d.is_active,onChange:t=>v("is_active",t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"0",children:"Inactive"})]}),e.jsx("button",{onClick:I,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(k,{className:"w-6 h-6 animate-spin"})})})}):N.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No services found"})}):N.map(t=>{var l;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),t.description&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:t.description})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${R(t.category)}`,children:((l=j.find(c=>c.value===t.category))==null?void 0:l.label)||t.category})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center text-sm text-gray-900",children:t.price})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),t.duration_minutes," min"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>P(t),className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:e.jsx(U,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>M(t),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:e.jsx(B,{className:"w-4 h-4"})})]})})]},t.id)})})]})})})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:f?"Edit Service":"Add New Service"}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name *"}),e.jsx("input",{type:"text",value:r.name,onChange:t=>a({...r,name:t.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter service name"}),s.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.name[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:t=>a({...r,description:t.target.value}),rows:3,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.description?"border-red-500":"border-gray-300"}`,placeholder:"Enter service description"}),s.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.description[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (â‚±) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:r.price,onChange:t=>a({...r,price:t.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.price?"border-red-500":"border-gray-300"}`,placeholder:"0.00"}),s.price&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.price[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"}),e.jsx("input",{type:"number",min:"15",step:"15",value:r.duration_minutes,onChange:t=>a({...r,duration_minutes:t.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.duration_minutes?"border-red-500":"border-gray-300"}`}),s.duration_minutes&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.duration_minutes[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsx("select",{value:r.category,onChange:t=>a({...r,category:t.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${s.category?"border-red-500":"border-gray-300"}`,children:j.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),s.category&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.category[0]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:r.is_active,onChange:t=>a({...r,is_active:t.target.checked}),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Active Service"})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{x(!1),a(b),n({}),u(null),m(!1)},className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:[f?"Update":"Create"," Service"]})]})]})]})})})]})}export{ie as default};
