import{r as l,j as e,L as E,$ as c}from"./app-JcAsAuql.js";import{A as L,C as d,a as f}from"./app-layout-E1jTg9LY.js";import{a as y}from"./ApiClient-BqHOMZS_.js";import{c as F}from"./button-f96-MP48.js";import{R as j}from"./refresh-cw-BJG4YFjv.js";import{C as b}from"./calendar-plus-CgHhfb6t.js";import{C as R}from"./circle-check-big-2mnnnVKB.js";import{C as N}from"./circle-x-CZFefVG-.js";import{U as H}from"./user-Clo-9yXY.js";import{E as I}from"./eye-DbunR0GL.js";import{S as U}from"./square-pen-DJd9gEqa.js";import{T as V}from"./triangle-alert-CxR3w4lD.js";import{P as B}from"./phone-BvaIeQQR.js";import"./index-CfwClSTy.js";import"./index-jL6B-qfF.js";import"./index-BwiEApH7.js";import"./index-Bm2cAylQ.js";import"./app-logo-icon-DBA5PkxD.js";import"./sweetalert2.esm.all-acGi8jXx.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],X=F("History",q),x=[{value:"scheduled",label:"Scheduled",color:"bg-blue-100 text-blue-800"},{value:"confirmed",label:"Confirmed",color:"bg-green-100 text-green-800"},{value:"checked_in",label:"Checked In",color:"bg-yellow-100 text-yellow-800"},{value:"in_progress",label:"In Progress",color:"bg-purple-100 text-purple-800"},{value:"completed",label:"Completed",color:"bg-green-100 text-green-800"},{value:"cancelled",label:"Cancelled",color:"bg-red-100 text-red-800"},{value:"no_show",label:"No Show",color:"bg-gray-100 text-gray-800"}],Y=[{title:"Patient Dashboard",href:"/patient/dashboard"},{title:"My Appointments",href:"/patient/appointments"}];function me(){const[p,v]=l.useState([]),[w,h]=l.useState(!0),[i,g]=l.useState({status:"",date_from:"",date_to:""}),[r,u]=l.useState("upcoming"),[n,C]=l.useState({upcoming:0,completed:0,cancelled:0,total:0}),o=async()=>{try{h(!0);const t={...i,view:r},s=await y.getMyAppointments(t);v(s.data||s.appointments||[]),C(s.stats||n)}catch(t){console.error("Error fetching appointments:",t)}finally{h(!1)}};l.useEffect(()=>{o()},[i,r]);const m=(t,s)=>{g(a=>({...a,[t]:s}))},k=()=>{g({status:"",date_from:"",date_to:""})},A=async t=>{try{await y.cancelAppointment(t.id),o()}catch(s){console.error("Error cancelling appointment:",s)}},D=(t,s)=>new Date(`${t} ${s}`).toLocaleString("en-PH",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),_=t=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(t),S=t=>{const s=x.find(a=>a.value===t);return(s==null?void 0:s.color)||"bg-gray-100 text-gray-800"},P=t=>{const s=new Date(`${t.appointment_date} ${t.appointment_time}`),a=new Date;return(s.getTime()-a.getTime())/(1e3*3600)>24&&["scheduled","confirmed"].includes(t.status)},T=t=>{const s=new Date(`${t.appointment_date} ${t.appointment_time}`),a=new Date;return(s.getTime()-a.getTime())/(1e3*3600)>24&&["scheduled","confirmed"].includes(t.status)};return e.jsxs(L,{breadcrumbs:Y,children:[e.jsx(E,{title:"My Appointments"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Appointments"}),e.jsx("p",{className:"text-gray-600",children:"View and manage your dental appointments"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>u("upcoming"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${r==="upcoming"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(d,{className:"w-4 h-4 mr-2 inline"}),"Upcoming"]}),e.jsxs("button",{onClick:()=>u("history"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${r==="history"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(X,{className:"w-4 h-4 mr-2 inline"}),"History"]})]}),e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(j,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs(c,{href:"/patient/book-appointment",className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:[e.jsx(b,{className:"w-4 h-4"}),"Book Appointment"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:n.upcoming})]}),e.jsx(d,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:n.completed})]}),e.jsx(R,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cancelled"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:n.cancelled})]}),e.jsx(N,{className:"w-8 h-8 text-red-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Visits"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.total})]}),e.jsx(H,{className:"w-8 h-8 text-gray-600"})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("select",{value:i.status,onChange:t=>m("status",t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),x.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),e.jsx("button",{onClick:k,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear Filters"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),e.jsx("input",{type:"date",value:i.date_from,onChange:t=>m("date_from",t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),e.jsx("input",{type:"date",value:i.date_to,onChange:t=>m("date_to",t.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Appointment Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor & Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(j,{className:"w-6 h-6 animate-spin"})})})}):p.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(d,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:r==="upcoming"?"No upcoming appointments":"No appointment history"}),e.jsx("p",{className:"text-sm mb-4",children:r==="upcoming"?"Schedule your next dental visit":"Your completed appointments will appear here"}),r==="upcoming"&&e.jsxs(c,{href:"/patient/book-appointment",className:"inline-flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:[e.jsx(b,{className:"w-4 h-4"}),"Book Appointment"]})]})}):p.map(t=>{var s;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Appointment #",t.id]}),t.reason_for_visit&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Reason: ",t.reason_for_visit]}),t.notes&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Notes: ",t.notes]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Dr. ",t.doctor.name]}),e.jsx("p",{className:"text-sm text-gray-600",children:t.service.name}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(f,{className:"w-3 h-3 mr-1"}),t.service.duration_minutes," min"]}),e.jsx("span",{className:"text-xs text-gray-500",children:_(t.service.price)})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:D(t.appointment_date,t.appointment_time)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${S(t.status)}`,children:((s=x.find(a=>a.value===t.status))==null?void 0:s.label)||t.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{href:`/patient/appointments/${t.id}`,className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"View Details",children:e.jsx(I,{className:"w-4 h-4"})}),T(t)&&e.jsx(c,{href:`/patient/appointments/${t.id}/reschedule`,className:"p-1 text-orange-600 hover:bg-orange-50 rounded",title:"Reschedule",children:e.jsx(U,{className:"w-4 h-4"})}),P(t)&&e.jsx("button",{onClick:()=>A(t),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Cancel Appointment",children:e.jsx(N,{className:"w-4 h-4"})})]})})]},t.id)})})]})})}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Appointment Policies"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(d,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Cancellation Policy"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Appointments can be cancelled up to 24 hours before the scheduled time without penalty."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(f,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Arrival Time"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Please arrive 15 minutes early for your appointment to complete any necessary paperwork."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:e.jsx(V,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Late Arrival"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Appointments may need to be rescheduled if you arrive more than 15 minutes late."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:e.jsx(B,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Emergency Contact"}),e.jsx("p",{className:"text-sm text-gray-600",children:"For dental emergencies, please call our emergency line at (555) 123-4567."})]})]})]})]})]})]})}export{me as default};
