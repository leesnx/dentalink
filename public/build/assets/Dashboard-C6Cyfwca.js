import{r as l,j as e,L as C,$ as r}from"./app-JcAsAuql.js";import{A as T,F as p,c as j,C as n,U as d,H as u,a as D}from"./app-layout-E1jTg9LY.js";import{a as N}from"./ApiStaff-DmNT6m6T.js";import{R as c}from"./refresh-cw-BJG4YFjv.js";import{T as R}from"./trending-up-cpOv_zGG.js";import{A as U}from"./activity-BPAZzZpE.js";import{C as f}from"./circle-check-big-2mnnnVKB.js";import{A as b}from"./arrow-up-right-u77aCWnL.js";import{U as L}from"./user-check-DK4LStuz.js";import{T as $}from"./triangle-alert-CxR3w4lD.js";import"./button-f96-MP48.js";import"./index-CfwClSTy.js";import"./index-jL6B-qfF.js";import"./index-BwiEApH7.js";import"./index-Bm2cAylQ.js";import"./app-logo-icon-DBA5PkxD.js";import"./sweetalert2.esm.all-acGi8jXx.js";const I=[{title:"Staff Dashboard",href:"/staff/dashboard"}];function ee(){const[t,y]=l.useState({appointments_today:0,appointments_this_week:0,total_patients:0,completed_treatments:0,pending_appointments:0,overdue_tasks:0}),[o,v]=l.useState([]),[m,w]=l.useState([]),[E,A]=l.useState([]),[a,x]=l.useState(!0),i=async()=>{try{x(!0);const s=await N.getDashboardData();y(s.stats||t),v(s.todayAppointments||[]),w(s.upcomingAppointments||[]),A(s.recentActivities||[])}catch(s){console.error("Error fetching dashboard data:",s)}finally{x(!1)}};l.useEffect(()=>{i();const s=setInterval(i,3e5);return()=>clearInterval(s)},[]);const _=s=>new Date(`2000-01-01 ${s}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),k=s=>new Date(s).toLocaleDateString("en-PH",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=s=>({scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",checked_in:"bg-yellow-100 text-yellow-800",in_progress:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",S=async s=>{try{await N.checkInAppointment(s),i()}catch(g){console.error("Error checking in patient:",g)}};return e.jsxs(T,{breadcrumbs:I,children:[e.jsx(C,{title:"Staff Dashboard"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your daily overview."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(c,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs(r,{href:"/patient-records/create",className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:[e.jsx(p,{className:"w-4 h-4"}),"New Record"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a?"...":t.appointments_today}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(j,{className:"w-3 h-3 mr-1"}),t.pending_appointments," pending"]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(n,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Week"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a?"...":t.appointments_this_week}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"Appointments scheduled"]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(U,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"My Patients"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a?"...":t.total_patients}),e.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[e.jsx(d,{className:"w-3 h-3 mr-1"}),"Under your care"]})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(d,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed Treatments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a?"...":t.completed_treatments}),e.jsxs("p",{className:"text-xs text-orange-600 flex items-center mt-1",children:[e.jsx(f,{className:"w-3 h-3 mr-1"}),"This month"]})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:e.jsx(u,{className:"w-6 h-6 text-orange-600"})})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(r,{href:"/appointments/create",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(j,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Book Appointment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Schedule new appointment"})]})]}),e.jsxs(r,{href:"/patient-records/create",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(p,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"New Record"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Add patient record"})]})]}),e.jsxs(r,{href:"/treatment-plans/create",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(u,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Treatment Plan"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create new plan"})]})]}),e.jsxs(r,{href:"/patients/create",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(d,{className:"w-8 h-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Add Patient"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Register new patient"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Today's Schedule"}),e.jsxs(r,{href:`/appointments?date=${new Date().toISOString().split("T")[0]}`,className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:["View all",e.jsx(b,{className:"w-4 h-4"})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:a?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(c,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading..."]}):o.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(n,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No appointments today"})]}):o.map(s=>e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(D,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium text-gray-900",children:_(s.appointment_time)})]}),e.jsx("p",{className:"font-medium text-gray-900",children:s.patient.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.service.name}),s.reason_for_visit&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.reason_for_visit})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h(s.status)}`,children:s.status.replace("_"," ")}),s.status==="confirmed"&&e.jsx("button",{onClick:()=>S(s.id),className:"p-1 text-green-600 hover:bg-green-50 rounded",title:"Check In",children:e.jsx(L,{className:"w-4 h-4"})})]})]})},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Appointments"}),e.jsxs(r,{href:"/appointments",className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:["View all",e.jsx(b,{className:"w-4 h-4"})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:a?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(c,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading..."]}):m.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(n,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No upcoming appointments"})]}):m.map(s=>e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.patient.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.service.name}),e.jsx("p",{className:"text-xs text-gray-500",children:k(`${s.appointment_date} ${s.appointment_time}`)})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h(s.status)}`,children:s.status.replace("_"," ")})]})},s.id))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Tasks & Alerts"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[t.overdue_tasks>0&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx($,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Pending Tasks"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["You have ",t.overdue_tasks," overdue task",t.overdue_tasks>1?"s":""]})]}),e.jsx(r,{href:"/patient-records?status=pending",className:"ml-auto px-3 py-1 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200",children:"Review"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(f,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"All Systems Operational"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your schedule and systems are running smoothly"})]}),e.jsx("span",{className:"ml-auto px-3 py-1 bg-green-100 text-green-700 rounded text-sm",children:"Active"})]})]})})]})]})]})}export{ee as default};
