import{r as l,j as e,L as H,$ as t}from"./app-JcAsAuql.js";import{A as L,C as x,H as h,D as T,F as N,a as U,B as $}from"./app-layout-E1jTg9LY.js";import{a as i}from"./ApiClient-BqHOMZS_.js";import{R as c}from"./refresh-cw-BJG4YFjv.js";import{C as f}from"./calendar-plus-CgHhfb6t.js";import{C as y}from"./circle-check-big-2mnnnVKB.js";import{A as M}from"./activity-BPAZzZpE.js";import{C as v}from"./credit-card-JwXGCKuy.js";import{U as V}from"./user-Clo-9yXY.js";import{A as d}from"./arrow-up-right-u77aCWnL.js";import{T as E}from"./triangle-alert-CxR3w4lD.js";import"./button-f96-MP48.js";import"./index-CfwClSTy.js";import"./index-jL6B-qfF.js";import"./index-BwiEApH7.js";import"./index-Bm2cAylQ.js";import"./app-logo-icon-DBA5PkxD.js";import"./sweetalert2.esm.all-acGi8jXx.js";const I=[{title:"Patient Dashboard",href:"/patient/dashboard"}];function ne(){const[g,w]=l.useState([]),[p,_]=l.useState([]),[j,A]=l.useState([]),[a,R]=l.useState({upcoming_appointments:0,completed_appointments:0,active_treatment_plans:0,outstanding_balance:0}),[r,u]=l.useState(!0),[F,P]=l.useState([]),m=async()=>{try{u(!0);const[s,n,D,S,B]=await Promise.all([i.getDashboardStats(),i.getMyAppointments({status:"upcoming",limit:5}),i.getMyRecords({limit:3}),i.getMyTreatmentPlans({status:"active"}),i.getRecentNotifications()]);R(s.stats||a),w(n.data||[]),_(D.data||[]),A(S.data||[]),P(B.notifications||[])}catch(s){console.error("Error fetching dashboard data:",s)}finally{u(!1)}};l.useEffect(()=>{m();const s=setInterval(m,6e5);return()=>clearInterval(s)},[]);const o=s=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(s),k=s=>new Date(s).toLocaleDateString("en-PH",{month:"short",day:"numeric",year:"numeric"}),C=(s,n)=>new Date(`${s} ${n}`).toLocaleString("en-PH",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=s=>({scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",checked_in:"bg-yellow-100 text-yellow-800",in_progress:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",draft:"bg-gray-100 text-gray-800",approved:"bg-green-100 text-green-800",active:"bg-blue-100 text-blue-800"})[s]||"bg-gray-100 text-gray-800";return e.jsxs(L,{breadcrumbs:I,children:[e.jsx(H,{title:"Patient Dashboard"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Patient Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your health overview."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(c,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs(t,{href:"/patient/book-appointment",className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:[e.jsx(f,{className:"w-4 h-4"}),"Book Appointment"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Upcoming Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:r?"...":a.upcoming_appointments}),e.jsxs("p",{className:"text-xs text-blue-600 flex items-center mt-1",children:[e.jsx(x,{className:"w-3 h-3 mr-1"}),"Scheduled"]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(x,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed Visits"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:r?"...":a.completed_appointments}),e.jsxs("p",{className:"text-xs text-green-600 flex items-center mt-1",children:[e.jsx(y,{className:"w-3 h-3 mr-1"}),"All time"]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(M,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Treatment Plans"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:r?"...":a.active_treatment_plans}),e.jsxs("p",{className:"text-xs text-purple-600 flex items-center mt-1",children:[e.jsx(h,{className:"w-3 h-3 mr-1"}),"In progress"]})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(h,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Outstanding Balance"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:r?"...":o(a.outstanding_balance)}),e.jsxs("p",{className:"text-xs text-red-600 flex items-center mt-1",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),"Pending payment"]})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(v,{className:"w-6 h-6 text-red-600"})})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(t,{href:"/patient/book-appointment",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(f,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Book Appointment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Schedule your next visit"})]})]}),e.jsxs(t,{href:"/patient/records",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(N,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"View Records"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Access medical history"})]})]}),e.jsxs(t,{href:"/patient/billing",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(v,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Pay Bills"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Make payments online"})]})]}),e.jsxs(t,{href:"/patient/profile",className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(V,{className:"w-8 h-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Update Profile"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage your information"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Appointments"}),e.jsxs(t,{href:"/patient/appointments",className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:["View all",e.jsx(d,{className:"w-4 h-4"})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:r?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(c,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading..."]}):g.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(x,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No upcoming appointments"}),e.jsx(t,{href:"/patient/book-appointment",className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-2 inline-block",children:"Book an appointment"})]}):g.map(s=>e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:C(s.appointment_date,s.appointment_time)})]}),e.jsxs("p",{className:"font-medium text-gray-900",children:["Dr. ",s.doctor.name]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.service.name}),s.reason_for_visit&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.reason_for_visit})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b(s.status)}`,children:s.status.replace("_"," ")})]})},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Medical Records"}),e.jsxs(t,{href:"/patient/records",className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:["View all",e.jsx(d,{className:"w-4 h-4"})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:r?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(c,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading..."]}):p.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No medical records found"})]}):p.map(s=>e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.diagnosis}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Dr. ",s.createdBy.name]}),s.appointment&&e.jsx("p",{className:"text-xs text-gray-500",children:s.appointment.service.name}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:k(s.created_at)})]}),e.jsx(t,{href:`/patient-records/${s.id}`,className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"View Record",children:e.jsx(d,{className:"w-4 h-4"})})]})},s.id))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Active Treatment Plans"}),e.jsxs(t,{href:"/patient/treatment-plans",className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center gap-1",children:["View all",e.jsx(d,{className:"w-4 h-4"})]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:r?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(c,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading..."]}):j.length===0?e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx(h,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),e.jsx("p",{children:"No active treatment plans"})]}):j.map(s=>e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.plan_title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Dr. ",s.doctor.name]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b(s.status)}`,children:s.status.replace("_"," ")}),e.jsx("span",{className:"text-sm text-gray-500",children:o(s.estimated_cost)})]})]})})},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Health Alerts"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[a.outstanding_balance>0&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(E,{className:"w-5 h-5 text-yellow-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-800",children:"Outstanding Balance"}),e.jsxs("p",{className:"text-sm text-yellow-700",children:["You have an outstanding balance of ",o(a.outstanding_balance)]})]}),e.jsx(t,{href:"/patient/billing",className:"ml-auto px-3 py-1 bg-yellow-100 text-yellow-700 rounded text-sm hover:bg-yellow-200",children:"Pay Now"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx($,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-800",children:"Appointment Reminder"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Remember to arrive 15 minutes early for your appointments"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(y,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:"Health Records Updated"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your health information is up to date"})]})]})]})})]})]})]})]})}export{ne as default};
