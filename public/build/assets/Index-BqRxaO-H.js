import{r,j as e,L as P,$ as h}from"./app-JcAsAuql.js";import{A as $,C as j,a as y,U as D}from"./app-layout-E1jTg9LY.js";import{a as x}from"./ApiStaff-DmNT6m6T.js";import{R as b}from"./refresh-cw-BJG4YFjv.js";import{P as I,S as U}from"./search-DCW9xceT.js";import{A as L}from"./activity-BPAZzZpE.js";import{C as p}from"./circle-check-big-2mnnnVKB.js";import{C as N}from"./circle-x-CZFefVG-.js";import{U as R}from"./user-Clo-9yXY.js";import{P as M}from"./phone-BvaIeQQR.js";import{E as F}from"./eye-DbunR0GL.js";import{U as W}from"./user-check-DK4LStuz.js";import{S as B}from"./square-pen-DJd9gEqa.js";import"./button-f96-MP48.js";import"./index-CfwClSTy.js";import"./index-jL6B-qfF.js";import"./index-BwiEApH7.js";import"./index-Bm2cAylQ.js";import"./app-logo-icon-DBA5PkxD.js";import"./sweetalert2.esm.all-acGi8jXx.js";const g=[{value:"scheduled",label:"Scheduled",color:"bg-blue-100 text-blue-800"},{value:"confirmed",label:"Confirmed",color:"bg-green-100 text-green-800"},{value:"checked_in",label:"Checked In",color:"bg-yellow-100 text-yellow-800"},{value:"in_progress",label:"In Progress",color:"bg-purple-100 text-purple-800"},{value:"completed",label:"Completed",color:"bg-green-100 text-green-800"},{value:"cancelled",label:"Cancelled",color:"bg-red-100 text-red-800"},{value:"no_show",label:"No Show",color:"bg-gray-100 text-gray-800"}],O=[{title:"Staff Dashboard",href:"/staff/dashboard"},{title:"Appointments",href:"/appointments"}];function ce(){const[l,v]=r.useState([]),[w,u]=r.useState(!0),[i,o]=r.useState({date:new Date().toISOString().split("T")[0],status:"",patient:""}),[n,C]=r.useState({today:0,thisWeek:0,completed:0,cancelled:0}),[a,f]=r.useState("today"),d=async()=>{try{u(!0);const s=await x.getAppointments(i);v(s.data||s.appointments||[]),C(s.stats||n)}catch(s){console.error("Error fetching appointments:",s)}finally{u(!1)}};r.useEffect(()=>{d()},[i]),r.useEffect(()=>{o(a==="today"?s=>({...s,date:new Date().toISOString().split("T")[0]}):s=>({...s,date:""}))},[a]);const m=(s,t)=>{o(c=>({...c,[s]:t}))},S=()=>{o({date:a==="today"?new Date().toISOString().split("T")[0]:"",status:"",patient:""})},k=async s=>{try{await x.checkInAppointment(s.id),d()}catch(t){console.error("Error checking in appointment:",t)}},A=async s=>{try{await x.completeAppointment(s.id,"Appointment completed successfully"),d()}catch(t){console.error("Error completing appointment:",t)}},_=async s=>{try{await x.cancelAppointment(s.id),d()}catch(t){console.error("Error cancelling appointment:",t)}},E=(s,t)=>new Date(`${s} ${t}`).toLocaleString("en-PH",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=s=>{const t=g.find(c=>c.value===s);return(t==null?void 0:t.color)||"bg-gray-100 text-gray-800"};return e.jsxs($,{breadcrumbs:O,children:[e.jsx(P,{title:"Staff Appointments"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Appointments"}),e.jsx("p",{className:"text-gray-600",children:"Manage your patient appointments and schedule"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>f("today"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${a==="today"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Today"}),e.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${a==="all"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Appointments"})]}),e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(b,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs(h,{href:"/appointments/create",className:"flex items-center gap-2 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:[e.jsx(I,{className:"w-4 h-4"}),"Book Appointment"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Today's Appointments"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.today})]}),e.jsx(j,{className:"w-8 h-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Week"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.thisWeek})]}),e.jsx(L,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:n.completed})]}),e.jsx(p,{className:"w-8 h-8 text-green-600"})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Cancelled"}),e.jsx("p",{className:"text-2xl font-bold text-red-900",children:n.cancelled})]}),e.jsx(N,{className:"w-8 h-8 text-red-600"})]})})]}),e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search patients...",value:i.patient,onChange:s=>m("patient",s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex gap-4",children:[a==="all"&&e.jsx("input",{type:"date",value:i.date,onChange:s=>m("date",s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsxs("select",{value:i.status,onChange:s=>m("status",s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Status"}),g.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),e.jsx("button",{onClick:S,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Clear"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(b,{className:"w-6 h-6 animate-spin"})})})}):l.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(j,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"No appointments found"}),e.jsx("p",{className:"text-sm",children:a==="today"?"No appointments scheduled for today":"No appointments match your filters"})]})}):l.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(R,{className:"h-5 w-5 text-blue-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.patient.name}),s.patient.phone&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(M,{className:"w-3 h-3 mr-1"}),s.patient.phone]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.service.name}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center mt-1",children:[e.jsx(y,{className:"w-3 h-3 mr-1"}),s.service.duration_minutes," minutes"]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:E(s.appointment_date,s.appointment_time)}),s.reason_for_visit&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.reason_for_visit})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${T(s.status)}`,children:((t=g.find(c=>c.value===s.status))==null?void 0:t.label)||s.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{href:`/appointments/${s.id}`,className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"View Details",children:e.jsx(F,{className:"w-4 h-4"})}),s.status==="confirmed"&&e.jsx("button",{onClick:()=>k(s),className:"p-1 text-yellow-600 hover:bg-yellow-50 rounded",title:"Check In",children:e.jsx(W,{className:"w-4 h-4"})}),s.status==="in_progress"&&e.jsx("button",{onClick:()=>A(s),className:"p-1 text-green-600 hover:bg-green-50 rounded",title:"Complete",children:e.jsx(p,{className:"w-4 h-4"})}),e.jsx(h,{href:`/appointments/${s.id}/edit`,className:"p-1 text-purple-600 hover:bg-purple-50 rounded",title:"Edit",children:e.jsx(B,{className:"w-4 h-4"})}),["scheduled","confirmed"].includes(s.status)&&e.jsx("button",{onClick:()=>_(s),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Cancel",children:e.jsx(N,{className:"w-4 h-4"})})]})})]},s.id)})})]})})}),a==="today"&&l.length>0&&e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Today's Summary"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:e.jsx(D,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Patients"}),e.jsx("p",{className:"font-semibold text-gray-900",children:l.length})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(p,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"font-semibold text-gray-900",children:l.filter(s=>s.status==="completed").length})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-full",children:e.jsx(y,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Remaining"}),e.jsx("p",{className:"font-semibold text-gray-900",children:l.filter(s=>!["completed","cancelled","no_show"].includes(s.status)).length})]})]})]})]})]})]})}export{ce as default};
